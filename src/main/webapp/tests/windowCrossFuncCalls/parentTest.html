<!DOCTYPE html>
<html lang="en">
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <title>ParentTest</title>
</head>
<body onload="alert('ParentTest Loaded')">
    <h2>Parent Window Test</h2>
    <button onclick="openChildwindow()">Open Child Window</button>
    <button onclick="closeChildwindow()">Close Child Window</button>
    <BR>
    <button onclick="checkBoxPage('userAdmin')">Check Button</button>
    <button onclick="unCheckBoxPage('userAdmin')">UnCheck Button</button>
    <BR><BR>
    <input type="checkbox" id="userAdmin" onchange="checkOpenWindow(this)">User Admin<BR>
    <button onclick="childFunction()">Call Child Function</button>
 
    <script language="Javascript" type="text/javascript">
    var userAdminWin = newChildWindow("ChildTest.html", "Child Button Window", "width=250, height=100", false)

function newChildWindow(url,target,features,replace) {
    var win = new Object();
    win.url = url;
    win.target = target;
    win.features = features;
    win.replace = replace;
    win.obj=null;
    return win;
}

document.getElementById("demo").innerHTML =
person.firstName + " is " + person.age + " years old.";

    var childWindow = null;

    function openChildwindow() {
        alert("OPENING CHILD WINDOW");
        if (childWindow == null ){
            alert("childWindow NULL Allocating");
            childWindow = window.open("ChildTest.html", "Child Window", "width=250, height=100");
        }
        childWindow.focus();
    }

    function closeChildwindow() {
         childWindow.focus();
        childWindow.close();
    }

    function childFunction() {
       childWindow.focus();
       childWindow.childFunction();
    }

    function parentFunction()
    {
        alert(" Parent Window Alert");
    }

//		  alert("CHECK BOX PAGE")
    function checkBoxPage(checkBoxId) {
        alert("checkBoxId = "+checkBoxId);
        var checkBox = document.getElementById("userAdmin");
	    checkBox.checked = true;
    }

//		  alert("HIDE "CHECK BOX PAGE")
    function unCheckBoxPage(checkBoxId) {
        alert("checkBoxId = "+checkBoxId);
        var checkBox = document.getElementById("userAdmin");
	    checkBox.checked = false;
   }

   function checkOpenWindow(cb) {
        cbId=cb.id;
        cbChecked=cb.checked;
        cbWin=getWin(cbId);
        if (cbWin != null) {
           if (cbChecked) {
                if (cbWin.obj == null) {
                    alert("OPENING NEW WINDOW cbWin.url = " + cbWin.url+" cbWin.target = "+cbWin.target+" cbWin.features = "+cbWin.features);
                    cbWin.obj = window.open(cbWin.url, cbWin.target, cbWin.features);
                }
           }
           else {
                  cbWin.obj.close();
           }
        }
   }

   function  getWin(winType) {
        win = null;
        switch(winType) {
            case "userAdmin":
                 win = userAdminWin;
                 break;
            default:
                 alert("ERROR unknown Window "+winType)
                 win = null;
         } 
         return win;
   }
</script>
</body>
</html>